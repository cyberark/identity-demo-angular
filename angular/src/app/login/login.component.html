<div class="container-fluid padding-0">
  <div *ngIf="loading" class="loader-screen">
    <img alt="spinner" class="loader" src="../../assets/images/Spinner.svg">
  </div>
  <app-header isHomeVisible=true [isSignUpVisible]="isSignUpVisible"></app-header>
  <app-error [btnClick]="onOk" [body]="errorMessage" [btnLabel]="popupBtnLabel"></app-error>
  <div class="app-page">
    <div class="container">
      <div class="row justify-content-center">
        <div class="card">
          <div class="card-body">
            <h3 class="text-center font-weight-light mb-3">{{loginHeader}}</h3>
            <form [formGroup]="loginForm" class="" autocomplete="off">
              <div *ngIf="authMessage != ''" class="login-error">
                <div><img class="error-image"
                  alt="successfailicon"  [src]="checkMessageType() ? '../../assets/images/check.png' : '../../assets/images/issue_icon.png'" />
                </div>
                <div class="breaktext_now" style="order:2;" [style.color]="checkMessageType() ? '#000' : '#cc3300'"  [innerHTML]="authMessage"></div>
              </div>
              <div class="form-group d-flex align-items-center">
                <label class="required label">Username</label>                    
                <input class="form-control" formControlName="username" required>
                <span *ngIf="hasError('username', 'required')">Required</span>
                <span *ngIf="hasError('username', 'email')">Username pattern does not match</span>
              </div>
              <div *ngIf="showLoginComponent('challenge')" class="form-group d-flex align-items-center">
                <label class="required label">Authentication Method</label>
                <select class="form-control" formControlName="authMethod" (change)="authMethodChange()" [value]="0"
                  required>
                  <option *ngFor="let mechanism of mechanisms; let i = index" [value]="i">
                    {{mechanism.PromptSelectMech}}
                  </option>
                </select>
                <span *ngIf="hasError('authMethod', 'required')">Required</span>
              </div>
              <div *ngIf="textAnswer" class="form-group d-flex align-items-center">
                <label class="required label">{{answerLabel}}</label>
                <input *ngIf="!showQRCode && !isPhoneCall" class="form-control" formControlName="answer" type="password" required>
                <div *ngIf="showQRCode"><img [attr.src]="QRImageSource" alt="QR Code"></div>
                <span *ngIf="hasError('answer', 'required')">{{answerErrorText}} is required</span>
              </div>
              <div *ngIf="showLoginComponent('reset')" class="form-group">
                <label class="required label">Confirm New Password</label>
                <input class="form-control" formControlName="confirmPassword" (blur)="matchPasswords()" type="password"
                  required>
                <span *ngIf="hasError('confirmPassword', 'required')">Required</span>
                <span *ngIf="!matchPasswordsCheck">Confirm Password must match with the Password</span>
              </div>
              <div *ngIf="showForgotPassword('password')" class="forgot-password-anchor">
                <a href="/login" (click)="forgotPassword()">Forgot Password?</a>
              </div>
              <div class="d-flex mt-4">
                <button type="button" *ngIf="!showLoginComponent('username')" class="container btn btn-outline-secondary mr-5" (click)="startOver()">
                  Start Over
                </button>
                <button class="container btn btn-secondary" type="submit"
                (click)="loginUser()">{{loginButtonText}}</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <app-footer></app-footer>
</div>